# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

## –û–±–∑–æ—Ä

Telegram –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è **–æ—Ç–∫—Ä—ã—Ç–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** –ø–æ –∫–Ω–æ–ø–∫–µ `/start`. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **—Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–π** - —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É, —Ä–∞—É–Ω–¥—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç `/start` –≤ –±–æ—Ç–µ**
2. **–ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `telegram_id`
3. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–≥—Ä—É –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä–∞—Ç—å**
5. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º** - —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É, —Ä–∞—É–Ω–¥—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Telegram –±–æ—Ç–µ

### 1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `telegram_id`:

```python
from telegram import InlineKeyboardButton, InlineKeyboardMarkup

async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user = update.effective_user
    telegram_id = user.id
    
    # URL –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å telegram_id
    web_url = f"http://your-server-ip/?telegram_id={telegram_id}"
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    keyboard = [
        [InlineKeyboardButton("üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É", url=web_url)]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await context.bot.send_message(
        chat_id=update.effective_chat.id,
        text="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Brain Survivor! üß†\n\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.",
        reply_markup=reply_markup
    )
```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

```python
from telegram.ext import Application, CommandHandler

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
application.add_handler(CommandHandler("start", start_command))
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `telegram_id` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è/–ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- `game_id` (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) - ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä—ã
- `user_id` (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–∏–º–µ—Ä—ã URL:

```
# –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –±–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
http://your-server-ip/?telegram_id=123456789

# –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
http://your-server-ip/?game_id=123&user_id=456
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. **–ï—Å–ª–∏ –µ—Å—Ç—å `telegram_id`**:
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ –ë–î (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ—Ç –∏–º—è –≤ —Ñ–æ—Ä–º–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–≥—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `telegram_id` –¥–ª—è –ø–æ–∏—Å–∫–∞/—Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã**:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–≥—Ä—É (—Ç–∏–ø, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤, —Ç–µ–º–∞)
   - Frontend —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É —á–µ—Ä–µ–∑ API: `POST /api/game/create`
   - API —Å–æ–∑–¥–∞–µ—Ç/–Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id` –∏ —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π**:
   - Frontend —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç —Ä–∞—É–Ω–¥—ã: `POST /api/round/create`
   - Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–∞—É–Ω–¥—ã: `POST /api/round/start`
   - Frontend –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã: `GET /api/questions/random`
   - Frontend –æ—Ç–º–µ—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ: `POST /api/question/mark-displayed`
   - Frontend –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞—É–Ω–¥—ã: `POST /api/round/finish`

## API Endpoints –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã
```
POST /api/game/create
{
  "game_type": "quick",
  "theme_id": null,
  "total_rounds": 9,
  "player_name": "–ò–º—è –∏–≥—Ä–æ–∫–∞",
  "player_telegram_id": 123456789
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
```
GET /api/user/info?telegram_id=123456789
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—É–Ω–¥–∞
```
POST /api/round/create
{
  "game_id": 1,
  "round_number": 1,
  "theme_id": null,
  "questions_count": 10
}
```

### –ó–∞–ø—É—Å–∫ —Ä–∞—É–Ω–¥–∞
```
POST /api/round/start
{
  "game_id": 1,
  "round_id": 1
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
```
GET /api/questions/random?game_id=1&user_id=1
```

### –û—Ç–º–µ—Ç–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
```
POST /api/question/mark-displayed
{
  "round_question_id": 1
}
```

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞—É–Ω–¥–∞
```
POST /api/round/finish
{
  "game_id": 1,
  "round_id": 1
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –±–æ—Ç–∞** - –±–æ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ** - frontend —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –±–µ–∑ –±–æ—Ç–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º:
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã `game_id` –∏ `user_id`, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä" (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —Ç–æ–ª—å–∫–æ `telegram_id`, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "–ø–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
